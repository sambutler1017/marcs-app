<div *ngIf="!loading; else loader">
  <ik-header
    title="{{ userData | formatUserName }}"
    [backEnabled]="true"
    (backClick)="onBackClick()"
  >
    <div class="inline-display header-buttons" *ngIf="canEdit">
      <button
        class="btn btn-default btn-size btn-right h-button"
        (click)="onResetPassword()"
        *featureAccess="[Application.USER, Feature.USER_DETAIL, Access.UPDATE]"
      >
        Reset Password
      </button>
      <button
        class="btn btn-danger btn-size btn-right h-button"
        (click)="deleteUserModal.modal.open()"
        *featureAccess="[Application.USER, Feature.USER_DETAIL, Access.DELETE]"
      >
        Delete User
      </button>
    </div>
  </ik-header>
  <ik-banner *ngIf="!userData.appAccess" type="warning">
    This user currently does not have access to the website. Contact support
    with any questions!
  </ik-banner>
  <div class="leftColumn column-half">
    <ik-card [padding]="false">
      <ik-card-header title="Details">
        <ng-container *ngIf="canEdit">
          <ik-icon
            icon="edit"
            *featureAccess="[
              Application.USER,
              Feature.USER_DETAIL,
              Access.UPDATE
            ]"
            (click)="onUserEditClick()"
          ></ik-icon>
        </ng-container>
      </ik-card-header>
      <div class="flex">
        <div class="left-column">
          <ik-card-info
            header="Name"
            text="{{ userData | formatUserName }}"
          ></ik-card-info>
        </div>
        <div class="right-column">
          <ik-card-info
            header="Email"
            [text]="userData.email ? userData.email : '-'"
          ></ik-card-info>
        </div>
      </div>

      <div class="flex">
        <div class="left-column">
          <ik-card-info
            header="Store ID"
            [text]="userData.storeId ? userData.storeId : '-'"
          ></ik-card-info>
        </div>
        <div class="right-column">
          <ik-card-info
            header="Store Name"
            [text]="userData.storeName ? userData.storeName : '-'"
          ></ik-card-info>
        </div>
      </div>

      <div class="flex">
        <div class="left-column">
          <ik-card-info
            header="Position"
            [text]="userData.webRole | webRoleTranslate"
          ></ik-card-info>
        </div>
        <div class="right-column">
          <ik-card-info
            [contentColor]="userData.appAccess ? 'text-success' : 'text-danger'"
            header="Access"
            [text]="
              userData.appAccess ? 'Has Access' : 'Does not have App Access'
            "
          ></ik-card-info>
        </div>
      </div>

      <div class="flex">
        <div class="left-column">
          <ik-card-info
            header="Hire Date"
            [text]="userData.hireDate | date: 'mediumDate'"
          >
          </ik-card-info>
        </div>
      </div>
    </ik-card>
  </div>
  <div class="rightColumn column-half">
    <app-user-vacations-card [canEdit]="canEdit"></app-user-vacations-card>
    <app-user-application-card></app-user-application-card>
  </div>
</div>

<app-delete-user-modal [userId]="userData?.id"></app-delete-user-modal>

<ng-template #loader>
  <ik-loading-indicator></ik-loading-indicator>
</ng-template>
